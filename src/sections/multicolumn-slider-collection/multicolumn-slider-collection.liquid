{{ 'section-multicolumn.css' | asset_url | stylesheet_tag }}
{{ 'section-multicolumn-collection.css' | asset_url | stylesheet_tag }}
<link rel="stylesheet" href="{{ 'component-slider.css' | asset_url }}" media="print" onload="this.media='all'">
<noscript>{{ 'component-slider.css' | asset_url | stylesheet_tag }}</noscript>
<script src="{{ 'product-form.js' | asset_url }}" defer="defer"></script>

{%- liquid
  assign se_stts = section.settings
-%}

<div class="multicolumn multicolumn-slider background-{{ section.settings.background_style }}{% if section.settings.title == blank %} no-heading{% endif %}
    {% if section.settings.hide_for_desktop %} large-up-hide{% endif %}
    {% if section.settings.hide_for_mobile %} medium-hide small-hide{% endif %}
  ">
  <div class="{% unless section.settings.full_width %}page-width{% endunless %}">
    {% if section.settings.title != blank or section.settings.subtitle != blank or section.settings.button_label != blank %}
      <div class="title-wrapper-with-link title-wrapper--self-padded-mobile{% if section.settings.title == blank %} title-wrapper-with-link--no-heading{% endif %}">
        <h2 class="title">
          {{ section.settings.title | escape }}
        </h2>
        {% if section.settings.subtitle != blank %}
          <h3 class="subtitle">{{ section.settings.subtitle | escape }}</h3>
        {% endif %}
        {%- if section.settings.button_label != blank and section.settings.swipe_on_mobile -%}
          <a href="{{ section.settings.button_link }}" class="link underlined-link large-up-hide">{{ section.settings.button_label | escape }}</a>
        {%- endif -%}
      </div>
    {% endif %}
    <div class="slider-mobile-gutter" 
    role="region"
    aria-label="Carousel"
    aria-live="polite">
      <div
        class="carousel grid--{{ se_stts.column_qty }}-col-desktop grid--{{ se_stts.mobile_column_qty }}-col {% if se_stts.show_half_last_column %}show-half-column{% endif %}"
        data-flickity='{
          "cellAlign": "left",
          "contain": true,
          "wrapAround": {{se_stts.loop}},
          "autoPlay": {% if se_stts.autoplay %}{{ se_stts.au_time | times: 1000 }}{% else %}0{% endif %},
          "pauseAutoPlayOnHover": {{se_stts.au_hover}},
          "prevNextButtons": {{se_stts.button}},
          "pageDots": {{se_stts.dot}}
        }'
        role="region"
        aria-label="Carousel"
        aria-live="polite"
        >
        {%- liquid
          assign highest_ratio = 0
          assign highest_ratio_mb = 0
          for block in section.blocks
            if block.settings.image.aspect_ratio > highest_ratio
              assign highest_ratio = block.settings.image.aspect_ratio
            endif
            if block.settings.image_mb.aspect_ratio > highest_ratio_mb
              assign highest_ratio_mb = block.settings.image_mb.aspect_ratio
            endif
          endfor
        -%}
        {%- for block in section.blocks -%}
          <div class="multicolumn-list__item grid__item{% if section.settings.column_alignment == 'center' %} center{% endif %}" {{ block.shopify_attributes }}>
            <div class="multicolumn-card">
              {%- if block.settings.image != blank -%}
                {% if section.settings.image_ratio == 'adapt' or section.settings.image_ratio == 'circle' %}
                  {% assign spaced_image = true %}
                {% endif %}
                {% if block.settings.link %}<a href="{{ block.settings.link }}" aria-label="See product">{% endif %}
                <div class="multicolumn-card__image-wrapper multicolumn-card__image-wrapper--{{ section.settings.image_width }}-width{% if section.settings.image_width != 'full' or spaced_image %} multicolumn-card-spacing{% endif %}">
                  <div class="media media--transparent media--{{ section.settings.image_ratio }} {% if block.settings.image_mb != blank %} small-hide{% endif %}"
                    {% if section.settings.image_ratio == 'adapt' %}
                      style="padding-bottom: {{ 1 | divided_by: highest_ratio | times: 100 }}%;"
                    {% endif %}>
                    <img
                      srcset="{%- if block.settings.image.width >= 165 -%}{{ block.settings.image | img_url: '165x' }} 165w,{%- endif -%}
                        {%- if block.settings.image.width >= 275 -%}{{ block.settings.image | img_url: '275x' }} 275w,{%- endif -%}
                        {%- if block.settings.image.width >= 375 -%}{{ block.settings.image | img_url: '375x' }} 375w,{%- endif -%}
                        {%- if block.settings.image.width >= 475 -%}{{ block.settings.image | img_url: '475x' }} 475w,{%- endif -%}
                        {%- if block.settings.image.width >= 540 -%}{{ block.settings.image | img_url: '540x' }} 540w,{%- endif -%}
                        {%- if block.settings.image.width >= 710 -%}{{ block.settings.image | img_url: '710x' }} 710w,{%- endif -%}
                        {%- if block.settings.image.width >= 1420 -%}{{ block.settings.image | img_url: '1420x' }} 1420w,{%- endif -%}"
                      src="{{ block.settings.image | img_url: 'master' }}"
                      sizes="(min-width: 990px) {% if section.blocks.size <= 2 %}710px{% else %}550px{% endif %},
                        (min-width: 750px) {% if section.blocks.size == 1 %}710px{% else %}550px{% endif %},
                        calc(100vw - 30px)"
                      alt="{{ block.settings.alt }}"
                      height="{{ block.settings.image.height }}"
                      width="{{ block.settings.image.width }}"
                     
                    >
                  </div>
                  {%- if block.settings.image_mb != blank -%}
                    <div class="media media--transparent media--{{ section.settings.image_ratio }} {% if block.settings.image != blank %} hidden small-show{% endif %}"
                      {% if section.settings.image_ratio == 'adapt' %}
                        style="padding-bottom: {{ 1 | divided_by: highest_ratio_mb | times: 100 }}%;"
                      {% endif %}>
                      <img
                        srcset="{%- if block.settings.image_mb.width >= 165 -%}{{ block.settings.image_mb | img_url: '165x' }} 165w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 275 -%}{{ block.settings.image_mb | img_url: '275x' }} 275w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 375 -%}{{ block.settings.image_mb | img_url: '375x' }} 375w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 475 -%}{{ block.settings.image_mb | img_url: '475x' }} 475w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 550 -%}{{ block.settings.image_mb | img_url: '550x' }} 550w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 710 -%}{{ block.settings.image_mb | img_url: '710x' }} 710w,{%- endif -%}
                          {%- if block.settings.image_mb.width >= 1420 -%}{{ block.settings.image_mb | img_url: '1420x' }} 1420w,{%- endif -%}"
                        src="{{ block.settings.image_mb | img_url: 'master' }}"
                        sizes="(min-width: 990px) {% if block.blocks.size <= 2 %}710px{% else %}calc(100vw / 2){% endif %},
                          (min-width: 750px) {% if block.blocks.size == 1 %}710px{% else %}calc(100vw / 2){% endif %},
                          calc(100vw - 30px)"
                        alt="{{ block.settings.alt }}"
                        height="{{ block.settings.image_mb.height }}"
                        width="{{ block.settings.image_mb.width }}"
                       
                      >
                    </div>
                  {%- endif -%}
                </div>
                {% if block.settings.link %}</a>{% endif %}
              {%- endif -%}
              <div class="multicolumn-card__info">
                {%- if block.settings.title != blank -%}
                  <h3>{{ block.settings.title | escape }}</h3>
                {%- endif -%}
                {%- if block.settings.text != blank -%}
                  <div class="rte">{{ block.settings.text }}</div>
                {%- endif -%}
              </div>
            </div>
          </div>
        {%- endfor -%}
        </div>
    </div>
    <div class="center{% if section.settings.swipe %} small-hide medium-hide{% endif %}">
      {%- if section.settings.button_label != blank -%}
        <a class="button button--primary"{% if section.settings.button_link == blank %} aria-disabled="true" role="link"{% else %} href="{{ section.settings.button_link }}"{% endif %}>
          {{ section.settings.button_label | escape }}
        </a>
      {%- endif-%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.multicolumn_slider_collection.name",
  "class": "spaced-section",
  "tag": "section",
  "settings": [
    {
      "type": "checkbox",
      "id": "hide_for_desktop",
      "label": "t:sections.multicolumn_slider_collection.settings.hide_for_desktop.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_for_mobile",
      "label": "t:sections.multicolumn_slider_collection.settings.hide_for_mobile.label",
      "default": false
    },
    {
      "type": "text",
      "id": "title",
      "default": "multicolumn_slider_collection",
      "label": "t:sections.multicolumn_slider_collection.settings.title.label"
    },
    {
      "type": "text",
      "id": "subtitle",
      "default": "Subtitle Featured collection",
      "label": "t:sections.multicolumn_slider_collection.settings.subtitle.label"
    },
    {
      "type": "select",
      "id": "image_width",
      "options": [
        {
          "value": "third",
          "label": "t:sections.multicolumn_slider_collection.settings.image_width.options__1.label"
        },
        {
          "value": "half",
          "label": "t:sections.multicolumn_slider_collection.settings.image_width.options__2.label"
        },
        {
          "value": "full",
          "label": "t:sections.multicolumn_slider_collection.settings.image_width.options__3.label"
        }
      ],
      "default": "full",
      "label": "t:sections.multicolumn_slider_collection.settings.image_width.label"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "adapt",
          "label": "t:sections.multicolumn_slider_collection.settings.image_ratio.options__1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.multicolumn_slider_collection.settings.image_ratio.options__2.label"
        },
        {
          "value": "square",
          "label": "t:sections.multicolumn_slider_collection.settings.image_ratio.options__3.label"
        },
        {
          "value": "circle",
          "label": "t:sections.multicolumn_slider_collection.settings.image_ratio.options__4.label"
        }
      ],
      "default": "adapt",
      "label": "t:sections.multicolumn_slider_collection.settings.image_ratio.label"
    },
    {
      "type": "select",
      "id": "column_alignment",
      "options": [
        {
          "value": "left",
          "label": "t:sections.multicolumn_slider_collection.settings.column_alignment.options__1.label"
        },
        {
          "value": "center",
          "label": "t:sections.multicolumn_slider_collection.settings.column_alignment.options__2.label"
        }
      ],
      "default": "left",
      "label": "t:sections.multicolumn_slider_collection.settings.column_alignment.label"
    },
    {
      "type": "range",
      "id": "column_qty",
      "label": "t:sections.multicolumn_slider_collection.settings.column_qty.label",
      "min": 3,
      "max": 5,
      "step": 1,
      "default": 5
    },
    {
      "type": "range",
      "id": "mobile_column_qty",
      "label": "t:sections.multicolumn_slider_collection.settings.mobile_column_qty.label",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 5
    },
    {
      "type": "checkbox",
      "id": "show_half_last_column",
      "label": "t:sections.multicolumn_slider_collection.settings.show_half_last_column.label",
      "default": true
    },
    {
      "type": "select",
      "id": "background_style",
      "options": [
        {
          "value": "none",
          "label": "t:sections.multicolumn_slider_collection.settings.background_style.options__1.label"
        },
        {
          "value": "primary",
          "label": "t:sections.multicolumn_slider_collection.settings.background_style.options__2.label"
        },
        {
          "value": "secondary",
          "label": "t:sections.multicolumn_slider_collection.settings.background_style.options__3.label"
        }
      ],
      "default": "primary",
      "label": "t:sections.multicolumn_slider_collection.settings.background_style.label"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Button label",
      "label": "t:sections.multicolumn_slider_collection.settings.button_label.label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:sections.multicolumn_slider_collection.settings.button_link.label"
    },
    {
      "type": "checkbox",
      "id": "swipe",
      "default": false,
      "label": "t:sections.multicolumn_slider_collection.settings.swipe.label"
    },
    {
      "type": "checkbox",
      "id": "full_width",
      "default": true,
      "label": "Make section full width"
    },
    {
      "type": "header",
      "content": "== Slider Settings"
    },
    {
      "type": "checkbox",
      "id": "loop",
      "label": "Use Loop?",
      "info": "At the end of cells, wrap-around to the other end for infinite scrolling.",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Use Autoplay?",
      "info": "Automatically advances to the next cell.",
      "default": false
    },
    {
      "type": "range",
      "id": "au_time",
      "min": 1,
      "max": 30,
      "step": 0.5,
      "label": "Autoplay Speed in second.",
      "unit": "sec",
      "default": 6
    },
    {
      "type": "checkbox",
      "id": "au_hover",
      "label": "Pause Autoplay On Hover?",
      "info": "Auto-playing will pause when the user hovers over the carousel.",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "button",
      "label": "Enable Prev Next Button?",
      "info": "Creates and enables previous & next buttons.",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "dot",
      "label": "Enable Page Dot?",
      "info": "Creates and enables page dots.",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "column",
      "name": "t:sections.multicolumn_slider.blocks.column.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.image.label"
        },
        {
          "type": "image_picker",
          "id": "image_mb",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.image_mb.label"
        },
        {
          "type": "text",
          "id": "alt",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.alt.label"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.title.label"
        },
        {
          "type": "richtext",
          "id": "text",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.text.label"
        },
        {
          "type": "url",
          "id": "link",
          "label": "t:sections.multicolumn_slider.blocks.column.settings.link.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.multicolumn_slider_collection.name",
      "blocks": [
        {
          "type": "column"
        },
        {
          "type": "column"
        },
        {
          "type": "column"
        }
      ]
    }
  ]
}
{% endschema %}
