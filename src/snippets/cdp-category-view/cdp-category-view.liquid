<script>
    
    document.addEventListener("DOMContentLoaded", function() {
    function getCookieId(cookies) {
        var cookieId = ''
        cookies.forEach(cookie => {
        if(cookie.includes('_scid=')) {
            cookieId = cookie
        }
        });
        return cookieId
    }
    
    function generateRandomUniqueId() {
        const timestamp = Date.now().toString(16);
        const randomPart = Math.random().toString(16).substr(2, 4);
        return timestamp + randomPart;
    }

    CDP.report('schutzSiteNavigation', {
        "type": "CATEGORY_VIEW",
        "taxes": 0,
        "totalPrice": 0,
        "coupon": "",
        "shippingtype": "",
        "city": "{{ customer.addresses[0].city }}",
        "CookieId": getCookieId(document.cookie.split(';')),
        "email": "{{ customer.email }}",
        "productList": [
            {
                "quantity": 0,
                "size": 0,
                "productTitle": "",
                "price": 0,
                "productId": "",
                "color": "",
                "categoryName": "",
            }
        ],
        "step": "",
        "country": "{{ customer.addresses[0].country }}",
        "address": "{{ customer.addresses[0].address1 }}",
        "id": generateRandomUniqueId(),
        "paymentType": "",
        "categoryName": "{{ collection.title }}",
        "postalCode": "{{ customer.addresses[0].zip }}"
    });
    });
</script>